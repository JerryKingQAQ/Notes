# 软件体系结构

## 第一章 概述

软件危机的表现：软件成本日益增长、开发进度难以控制、软件质量差、软件维护困难。

软件危机的原因：用户需求不明确、缺乏正确的理论指导、软件规模越来越大、软件复杂度越来越高。



**软件工程的三要素：** **方法，工具，过程**



## 第二章 软件体系结构建模

#### **软件体系结构的五种模型**

- **结构模型**：**最直观、最普遍的建模方法**。这种方法以体系结构的构件、连接件和其他概念来刻画结构并力图通过结构来反映系统的重要语义内容包括系统的配置、约束、隐含的假设条件、风格、性质等
- **框架模型**：框架模型与结构模型类似，但它不太侧重描述结构的细节而更侧重于整体的结构
- **动态模型**：动态模型是对结构或框架模型的补充，研究系统的“大颗粒”的行为性质。例如描述系统的重新配置或演化
- **过程模型**：过程模型研究构造系统的步骤和过程
- **功能模型**：功能模型认为体系结构是由一组功能构件按层次组成，下层向上层提供服务的模型。功能模型可以看作是一种特殊的框架模型

最常用的是**结构模型**和**动态模型**



#### 4+1视图模型

Kruchten在1995年提出

要点：

- 4+1视图模型从5个不同的视角包括**逻辑视图**、**进程视图**、**物理视图**、**开发视图**和**场景视图**来描述软件体系结构
- 每一个视图只关心系统的一个侧面，5个视图结合在一起才能反映系统的软件体系结构的全部内容

![image-20231225103842317](C:\Users\Jerry\AppData\Roaming\Typora\typora-user-images\image-20231225103842317.png)

五种视图：

- **逻辑视图**：逻辑视图主要支持系统的**功能需求**，即系统提供给最终用户的服务。在面向对象中，可以使用对象模型来代表逻辑视图，用**类图**来描述逻辑视图。**（对应类图）**
- **开发视图**：开发视图也称模块视图，主要侧重于**软件模块的组织和管理**。开发视图要考虑**软件内部的需求**，如软件开发的容易性、软件的重用和软件的通用性，要充分考虑由于具体开发工具的不同而带来的局限性。 **（对应包图）**
- **进程视图**：进程视图也称为并发视图，侧重于系统的**运行特性**，主要关注一些非功能性的需求，例如系统的性能和可用性。**（对应活动图、交互图、状态图）**
- **物理视图**：物理视图主要考虑如何把**软件映射到硬件上**。它通常要考虑到系统性能、规模、可靠性等，解决系统拓扑结构、系统安装、通讯等问题。 **（对应部署图）**
- **场景视图**：场景(scenarios)可以看作是那些重要**系统活动的抽象**，它使四个视图有机联系起来，从某种意义上说场景是最重要的需求抽象。**（对应用例图）**

![image-20231225104900585](C:\Users\Jerry\AppData\Roaming\Typora\typora-user-images\image-20231225104900585.png)

要点：

- **逻辑视图**和**开发视图**描述系统的**静态结构**，而**进程视图**和**物理视图**描述系统的**动态结构**
- 并不是所有的软件架构都需要“4+1”视图，但是**场景**对于所有情况都适用



#### 软件体系结构核心模型

五种元素：（加粗为三个最基础要素）

- **构件**：是最具有某种功能的**可重用的软件模板单元**，表示了系统中主要的计算元素和数据存储。分为复合构件和原子构件。
  - 原子构件是不可再分的构件，底层由实现该构件的类组成。复合构件由其他复合构件和原子构件通过连接而成
  - 这种构件的划分方式提供了**体系结构的分层表示能力**，有助于简化体系结构的设计
  - 常见的**构件模型**： OMG的**CORBA**。Sun的**EJB**。Microsoft的**DCOM**（分布式构件对象模型）
  - 构件**分类方法**： 关键字分类法、刻面分类法、超文本组织方法
- **连接件**：表示了**构件之间的交互**
  - 简单的连接件如：管道、过程调用、事件广播等
  - 复杂的连接件如：客户-服务器通信协议，数据库和应用之间的SQL连接等
- **配置**：表示了构件和连接件的**拓扑逻辑和约束**
  - 通过不同的端口类型，一个构件可以提供多重接口。一个端口可以非常简单，如过程调用，也可以表示更为复杂的界
    面 (包含一些约束)，如必须以某种顺序调用的一组过程调用
- 端口
- 角色



#### 软件体系结构生命周期的阶段

分为四个阶段：

- **需求分析阶段**：需求分析阶段的任务是**根据需求决定系统的功能**，在此阶段，设计师应对目标对象和环境作细致深入的调查，收集目标对象的基本信息，从中找出有用的信息，这是一个抽象思维、逻辑推理的过程，其结果是软件规格说明
- **建立软件体系结构阶段**：在这个阶段，体系结构设计师主要**从结构的角度**对整个系统进行分析选择**恰当的构件**、构件间的**相互作用关系**（连接件）以及对它们的**约束**（配置），最后形成一个系统框架以满足用户需求，为设计奠定基础。（软件体系结构设计的主要目的是**满足对软件的质量需求**）
- **设计阶段**：设计阶段主要是对系统进行**模块化**并**决定**描述各个构件间的**详细接口**、**算法**和**数据类型**的选定，对上支持建立体系结构阶段形成的框架，对下提供实现基础
- **实现阶段**：将设计阶段设计的算法及数据类型**进行程序语言表示**，满足设计体系结构和需求分析的要求，从而得到满足设计需求的目标系统
- **测试阶段**（一般认为在实现阶段）：包括单个构件的功能性测试和被组装应用的整体功能和性能测试

需求分析->构件体系结构->设计->实现->测试

**软件体系结构应建立**于传统的软件开发过程的**需求分析**和软件**设计阶段**之间



**请简述软件体系结构的生命周期**

以**自然语言**进行**软件结构的非形式化描述**，接着运用合适的形式化**数学理论模型**对上一阶段的非形式化描述进行规范定义，从而得到软件形式结构的**形式化规范描述**。对设计好的软件体系结构进行**验证和求精**，直到不需要进行求精验证时，转入**软件体系结构的实施**。在此阶段将软件结构实施于系统设计中，并将其结构的构件和连接件有机组织在一起。判断软件体系结构**是否需要扩展，演化**。需要从则重复以上步骤，否则对该体系结构进行**评价、度量，转入终结阶段**。



## 第三章 软件体系结构风格

软件体系结构风格定义：是描述某一**特定领域**中**系统组织方式的惯用模式**。

#### 经典的软件体系结构风格

- **数据流风格**：数据源源不断的产生，系统需要对这些数据进行若干处理分析、计算、 转换等。每个处理步骤由一个过滤器构件(Filter)实现，处理步骤之间的数据传输由管道(Piple)负责。
  - 批处理序列、管道/过滤器
  - 优点：具有良好的**隐蔽性**和**高内聚、低耦合**的特点，可以将整个系统的输入/输出行为看成是**多个过滤器的行为的简单合成**。支持软件复用，系统维护和增强系统性能简单，支持并发执行。
  - 缺点：**不适合处理交互的应用**、**系统性能不高**，增加了编写过滤器的复杂性（数据传输缺乏统一标准，每个过滤器都增加了解析和合成数据的工作，绝大部分时间消耗在格式转换上）
- 调用/返回风格
  - 主程序/子程序、面向对象风格、层次结构
- 独立构件风格
  - 进程通讯、事件系统
- 虚拟机风格
  - 解释器、基于规则的系统
- 仓库风格：
  - 数据库系统、超文本系统、黑板系统